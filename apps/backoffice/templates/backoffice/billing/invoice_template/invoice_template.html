{% extends "backoffice/billing/invoice_template/invoice_base.html" %}
{% load money %}
{% block title %}Factura {{ invoice.code }}{% endblock %}

{% block header_right %}
  <h2 class="mb-0">Factura</h2>
  <div># {{ invoice.code }}</div>
  <div>{{ invoice.created_at|date:"Y-m-d H:i" }}</div>
{% endblock %}

{% block content %}
  <section class="mb-3">
    <strong>Cliente:</strong>
    <div>{{ invoice.client_first_name }} {{ invoice.client_last_name }}</div>
    <div>Tel: {{ invoice.client_phone }}</div>
  </section>

  <table class="table table-sm table-bordered align-middle">
    <thead class="table-light">
      <tr>
        <th>Producto</th>
        <th>Cant.</th>
        <th>Precio unitario</th>
        <th class="text-end">Subtotal</th>
      </tr>
    </thead>
    <tbody>
      {% for item in invoice.items.all %}
      <tr>
        <td>{{ item.product.name }}{% if item.variant %} â€” {{ item.variant.label }}{% endif %}</td>
        <td>{{ item.quantity }}</td>
        <td>{{ item.unit_price|cop }}</td>
        <td class="text-end">{{ item.subtotal|cop }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <div class="d-flex justify-content-end">
    <div class="w-50">
      <div class="d-flex justify-content-between">
        <span>Subtotal:</span>
        <span>{{ invoice.subtotal|cop }}</span>
      </div>
      <div class="d-flex justify-content-between">
        <span>Descuento:</span>
        <span>- {{ invoice.discount_amount|cop }}</span>
      </div>
      <hr/>
      <div class="d-flex justify-content-between fw-bold">
        <span>Total:</span>
        <span>{{ invoice.total|cop }}</span>
      </div>
    </div>
  </div>
{% endblock %}
