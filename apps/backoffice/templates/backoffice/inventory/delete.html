{% extends "backoffice/base_backoffice.html" %}
{% load breadcrumbs %}

{% block title %}Eliminar Movimiento{% endblock %}

{% block breadcrumb %}
  {% breadcrumb "Inventario|backoffice:products:inventory:inventory_list" "Eliminar Movimiento" %}
{% endblock %}

{% block content %}
<div class="card">
  <div class="card-header">
    <h5 class="mb-0 text-danger">Eliminar Movimiento</h5>
  </div>
  <div class="card-body">

    {% if confirm_step %}
      <p class="text-warning">Para confirmar la eliminación del movimiento <strong>#{{ object.id }}</strong>,
      introduce tu contraseña:</p>

      <form method="post">
        {% csrf_token %}
        <input type="hidden" name="confirm_step" value="1">
        {{ password_form.password.label_tag }}
        {{ password_form.password }}
        {% if password_form.errors.password %}
          <div class="text-danger">{{ password_form.errors.password }}</div>
        {% endif %}
        <div class="mt-3">
          <button type="submit" class="btn btn-danger">Confirmar eliminación</button>
          <a href="{% url 'backoffice:products:inventory:inventory_list' %}" class="btn btn-secondary">Cancelar</a>
        </div>
      </form>

    {% else %}
      <p>¿Estás seguro de que deseas eliminar el movimiento <strong>#{{ object.id }}</strong>
      ({{ object.get_movement_type_display }} de {{ object.quantity }} {{ object.product.name }})?</p>

      <form method="post">
        {% csrf_token %}
        <input type="hidden" name="confirm_step" value="1">
        <button type="submit" class="btn btn-warning">Continuar</button>
        <a href="{% url 'backoffice:products:inventory:inventory_list' %}" class="btn btn-secondary">Cancelar</a>
      </form>
    {% endif %}
  </div>
</div>
{% endblock %}
